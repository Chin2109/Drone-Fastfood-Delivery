<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
  <meta charset="UTF-8">
  <title>ThÃªm mÃ³n má»›i</title>
</head>
<body>
<h1>ğŸœ ThÃªm mÃ³n má»›i</h1>

<form th:action="@{/restaurant/menu/add}" method="post">
  <label>TÃªn mÃ³n:</label><br>
  <input type="text" name="name" required><br><br>

  <label>MÃ´ táº£:</label><br>
  <textarea name="description" rows="3" cols="40"></textarea><br><br>

  <label>GiÃ¡ (VND):</label><br>
  <input type="number" name="price" min="0" required><br><br>

  <label>PhÃ¢n loáº¡i (Category):</label><br>
  <select name="category.id" required>
    <option value="">-- Chá»n loáº¡i --</option>
    <option th:each="cat : ${categories}"
            th:value="${cat.id}"
            th:text="${cat.name}">
    </option>
  </select><br><br>

  <label>áº¢nh mÃ³n Äƒn (URLs, phÃ¢n tÃ¡ch báº±ng dáº¥u pháº©y):</label><br>
  <input type="text" name="images" placeholder="vd: https://img1.jpg, https://img2.jpg"><br><br>

  <label>Thuá»™c nhÃ  hÃ ng (Restaurant ID):</label><br>
  <input type="number" name="restaurantId" required><br><br>

  <label>Chay:</label>
  <input type="checkbox" name="vegetarian"><br>

  <label>MÃ³n theo mÃ¹a:</label>
  <input type="checkbox" name="seasonal"><br><br>

  <fieldset>
    <legend>ThÃ nh pháº§n (Ingredients)</legend>
    <div id="ingredients">
      <div>
        <label>TÃªn nguyÃªn liá»‡u:</label>
        <input type="text" name="ingredients[0].name" required>
        <label>Loáº¡i:</label>
        <select name="ingredients[0].category.id">
          <option value="">-- Chá»n --</option>
          <option th:each="ic : ${ingredientCategories}"
                  th:value="${ic.id}"
                  th:text="${ic.name}">
          </option>
        </select>
        <label>CÃ²n hÃ ng:</label>
        <input type="checkbox" name="ingredients[0].inStoke" checked>
      </div>
    </div>
    <button type="button" onclick="addIngredient()">+ ThÃªm nguyÃªn liá»‡u</button>
  </fieldset>

  <br><br>
  <button type="submit">âœ… LÆ°u mÃ³n</button>
  <a th:href="@{/restaurant/home}">Quay láº¡i</a>
</form>

<script>
  let ingredientIndex = 1;
  function addIngredient() {
      const div = document.createElement('div');
      div.innerHTML = `
          <label>TÃªn nguyÃªn liá»‡u:</label>
          <input type="text" name="ingredients[${ingredientIndex}].name" required>
          <label>Loáº¡i:</label>
          <select name="ingredients[${ingredientIndex}].category.id">
              <option value="">-- Chá»n --</option>
          </select>
          <label>CÃ²n hÃ ng:</label>
          <input type="checkbox" name="ingredients[${ingredientIndex}].inStoke" checked>
          <button type="button" onclick="this.parentElement.remove()">âŒ</button>
      `;
      document.getElementById('ingredients').appendChild(div);
      ingredientIndex++;
  }
</script>

</body>
</html>
